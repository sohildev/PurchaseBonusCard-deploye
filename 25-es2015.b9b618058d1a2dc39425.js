(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"/gsP":function(e,t,i){"use strict";i.r(t),i.d(t,"AuthSigninModule",function(){return m});var s=i("ofXK"),n=i("jtHE"),r=i("XNiG"),o=i("quSY");class h extends r.a{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(e){return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.a.EMPTY):super._subscribe(e)}next(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}error(e){this.hasCompleted||super.error(e)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}var a=i("fXoL");class u{}let c=(()=>{class e extends class{constructor(){}loadScript(e,t,i,s=null){if("undefined"!=typeof document&&!document.getElementById(e)){let e=document.createElement("script");e.async=!0,e.src=t,e.onload=i,s||(s=document.head),s.appendChild(e)}}}{constructor(e,t={scope:"email"}){super(),this.clientId=e,this.initOptions=t}initialize(){return new Promise((t,i)=>{try{this.loadScript(e.PROVIDER_ID,"https://apis.google.com/js/platform.js",()=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init(Object.assign(Object.assign({},this.initOptions),{client_id:this.clientId})),this.auth2.then(()=>{t()}).catch(e=>{i(e)})})})}catch(s){i(s)}})}getLoginStatus(t){return new Promise((i,s)=>{if(this.auth2.isSignedIn.get()){let e=new u;const s=this.auth2.currentUser.get().getBasicProfile();if(e.id=s.getId(),e.name=s.getName(),e.email=s.getEmail(),e.photoUrl=s.getImageUrl(),e.firstName=s.getGivenName(),e.lastName=s.getFamilyName(),e.response=s,t&&t.refreshToken)this.auth2.currentUser.get().reloadAuthResponse().then(t=>{e.authToken=t.access_token,e.idToken=t.id_token,i(e)});else{const t=this.auth2.currentUser.get().getAuthResponse(!0);e.authToken=t.access_token,e.idToken=t.id_token,i(e)}}else s("No user is currently logged in with "+e.PROVIDER_ID)})}signIn(e){const t=Object.assign(Object.assign({},this.initOptions),e);return new Promise((i,s)=>{(t&&t.offline_access?this.auth2.grantOfflineAccess(e):this.auth2.signIn(e)).then(e=>{let t=new u;if(e&&e.code)t.authorizationCode=e.code;else{let e=this.auth2.currentUser.get().getBasicProfile(),i=this.auth2.currentUser.get().getAuthResponse(!0).access_token,s=this.auth2.currentUser.get().getAuthResponse(!0).id_token;t.id=e.getId(),t.name=e.getName(),t.email=e.getEmail(),t.photoUrl=e.getImageUrl(),t.firstName=e.getGivenName(),t.lastName=e.getFamilyName(),t.authToken=i,t.idToken=s,t.response=e}i(t)},e=>{s(e)}).catch(e=>{s(e)})})}signOut(e){return new Promise((t,i)=>{let s;s=e?this.auth2.disconnect():this.auth2.signOut(),s.then(e=>{e?i(e):t()}).catch(e=>{i(e)})})}}return e.PROVIDER_ID="GOOGLE",e})(),l=(()=>{class e{constructor(e){this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new n.a(1),this.initialized=!1,this._initState=new h,e instanceof Promise?e.then(e=>{this.initialize(e)}):this.initialize(e)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:t=console.error}=e;e.providers.forEach(e=>{this.providers.set(e.id,e.provider)}),Promise.all(Array.from(this.providers.values()).map(e=>e.initialize())).then(()=>{if(this.autoLogin){const e=[];let t=!1;this.providers.forEach((i,s)=>{let n=i.getLoginStatus();e.push(n),n.then(e=>{e.provider=s,this._user=e,this._authState.next(e),t=!0}).catch(console.debug)}),Promise.all(e).catch(()=>{t||(this._user=null,this._authState.next(null))})}}).catch(e=>{t(e)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}refreshAuthToken(t){return new Promise((i,s)=>{if(this.initialized)if(t!==c.PROVIDER_ID)s(e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const n=this.providers.get(t);n?n.getLoginStatus({refreshToken:!0}).then(e=>{e.provider=t,this._user=e,this._authState.next(e),i()}).catch(e=>{s(e)}):s(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(e.ERR_NOT_INITIALIZED)})}signIn(t,i){return new Promise((s,n)=>{if(this.initialized){let r=this.providers.get(t);r?r.signIn(i).then(e=>{e.provider=t,s(e),this._user=e,this._authState.next(e)}).catch(e=>{n(e)}):n(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(e.ERR_NOT_INITIALIZED)})}signOut(t=!1){return new Promise((i,s)=>{if(this.initialized)if(this._user){let n=this.providers.get(this._user.provider);n?n.signOut(t).then(()=>{i(),this._user=null,this._authState.next(null)}).catch(e=>{s(e)}):s(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}else s(e.ERR_NOT_LOGGED_IN);else s(e.ERR_NOT_INITIALIZED)})}}return e.\u0275fac=function(t){return new(t||e)(a.Zb("SocialAuthServiceConfig"))},e.\u0275prov=a.Ib({token:e,factory:e.\u0275fac}),e.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",e.ERR_NOT_LOGGED_IN="Not logged in",e.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",e})(),d=(()=>{class e{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(t){return{ngModule:e,providers:[l,{provide:"SocialAuthServiceConfig",useValue:t}]}}}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)(a.Zb(e,12))},providers:[l],imports:[[s.b]]}),e})();location;var p=i("tyNb");const g=function(){return["/auth/reset-password"]},_=function(){return["/auth/signup"]},f=[{path:"",component:(()=>{class e{constructor(e){this.authService=e}ngOnInit(){this.authService.authState.subscribe(e=>{this.user=e,console.log(e)})}signInWithGoogle(){this.authService.signIn(c.PROVIDER_ID).then(e=>console.log(e))}signOut(){this.authService.signOut()}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(l))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-auth-signin"]],decls:24,vars:4,consts:[[1,"auth-wrapper"],[1,"auth-content"],[1,"auth-bg"],[1,"r"],[1,"r","s"],[1,"card"],[1,"card-body","text-center"],[1,"mb-4"],[1,"feather","icon-unlock","auth-icon"],[1,"btn","btn-primary","mb-4",3,"click"],[1,"feather","icon-user","mr-2"],[1,"mb-2","text-muted"],[3,"routerLink"],[1,"mb-0","text-muted"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Nb(3,"span",3),a.Nb(4,"span",4),a.Nb(5,"span",4),a.Nb(6,"span",3),a.Rb(),a.Sb(7,"div",5),a.Sb(8,"div",6),a.Sb(9,"div",7),a.Nb(10,"i",8),a.Rb(),a.Sb(11,"h3",7),a.Gc(12,"Login"),a.Rb(),a.Sb(13,"button",9),a.cc("click",function(){return t.signInWithGoogle()}),a.Nb(14,"span",10),a.Gc(15," Login"),a.Rb(),a.Sb(16,"p",11),a.Gc(17,"Forgot password? "),a.Sb(18,"a",12),a.Gc(19,"Reset"),a.Rb(),a.Rb(),a.Sb(20,"p",13),a.Gc(21,"Don\u2019t have an account? "),a.Sb(22,"a",12),a.Gc(23,"Sign up"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.yb(18),a.kc("routerLink",a.nc(2,g)),a.yb(4),a.kc("routerLink",a.nc(3,_)))},directives:[p.i],encapsulation:2}),e})()}];let m=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:c.PROVIDER_ID,provider:new c("227753546366-onka406diau8qaou6pk8j0f00ono2g1d.apps.googleusercontent.com")}]}}],imports:[[s.b,d,p.j.forChild(f)]]}),e})()},jtHE:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var s=i("XNiG"),n=i("3N8a");class r extends n.a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}var o=i("IjjT");class h extends o.a{}const a=new h(r);var u=i("quSY"),c=i("7o/Q"),l=i("WMd4");class d extends c.a{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(d.dispatch,this.delay,new p(e,this.destination)))}_next(e){this.scheduleMessage(l.a.createNext(e))}_error(e){this.scheduleMessage(l.a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(l.a.createComplete()),this.unsubscribe()}}class p{constructor(e,t){this.notification=e,this.destination=t}}var g=i("9ppp"),_=i("Ylt2");class f extends s.a{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new m(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,n=i.length;let r;if(this.closed)throw new g.a;if(this.isStopped||this.hasError?r=u.a.EMPTY:(this.observers.push(e),r=new _.a(this,e)),s&&e.add(e=new d(e,s)),t)for(let o=0;o<n&&!e.closed;o++)e.next(i[o]);else for(let o=0;o<n&&!e.closed;o++)e.next(i[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),r}_getNow(){return(this.scheduler||a).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,s=this._events,n=s.length;let r=0;for(;r<n&&!(e-s[r].time<i);)r++;return n>t&&(r=Math.max(r,n-t)),r>0&&s.splice(0,r),s}}class m{constructor(e,t){this.time=e,this.value=t}}}}]);