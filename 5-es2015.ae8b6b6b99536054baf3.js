(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{cphX:function(t,e,i){"use strict";i.r(e),i.d(e,"routes",function(){return S}),i.d(e,"CampaignAddModule",function(){return R});var a=i("ofXK"),o=i("tyNb"),r=i("l1aK"),n=i("Lw2Y"),l=i("3Pt+"),s=i("zzOR"),c=i("fXoL"),b=i("jhN1"),d=i("VT7O"),p=i("/n7v"),m=i("GgBf"),h=i("Jvtu"),u=i("ZOsW");function v(t,e){1&t&&c.Nb(0,"i",22)}let f=(()=>{class t{constructor(t,e,i,a,o,r){this.router=t,this.fb=e,this.activatedRoute=i,this.campaignService=a,this.cdr=o,this.titleService=r,this.exampleOptions=s.a,this.campingTypeArray=[],this.loadingState=!1,this.showLoader=!1,this.valid_from=new Date,this.valid_until=new Date,this.formErrors={name:null,apierror:null},this.isEditing=!1,this.editId=null,this.pageTitle="Create Campaign",this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id")),this.addForm=this.fb.group({name:[null,l.q.compose([l.q.required])],type:[null],objective:[""],valid_from:[null],valid_until:[null],is_active:[!1]})}ngOnInit(){this.getMasterData(),this.titleService.setTitle(this.pageTitle+" | bonus777 "),this.isEditing&&(this.getEditObject(),this.pageTitle="Update Campaign",this.titleService.setTitle(this.pageTitle+" | bonus777 "))}ngAfterViewChecked(){this.cdr.detectChanges()}getMasterData(){this.campingTypeArray=n.b.CAMPAIGN_TYPES}getEditObject(){this.campaignService.getCampaignById(this.editId).subscribe(t=>{t?(this.valid_from=t.valid_from,this.valid_until=t.valid_until,this.addForm.patchValue({name:t.name,type:t.type,objective:t.objective,is_active:t.is_active})):this.router.navigateByUrl("/campaign")})}submitForm(t){if(t.valid){this.showLoader=!0;const e=new FormData;e.append("name",t.value.name),e.append("objective",t.value.objective),t.value.type&&e.append("type",t.value.type),e.append("valid_from",n.a.changedateFormate(t.value.valid_from[0])),e.append("valid_until",n.a.changedateFormate(t.value.valid_until[0])),e.append("is_active",!!t.value.is_active&&t.value.is_active),this.isEditing?this.campaignService.editCampaign(this.editId,e).subscribe(t=>{this.showLoader=!1,t&&this.router.navigateByUrl("/campaign")},t=>{this.showLoader=!1}):this.campaignService.addCampaign(e).subscribe(t=>{this.showLoader=!1,t&&this.router.navigateByUrl("/campaign")},t=>{this.showLoader=!1})}}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(o.f),c.Mb(l.d),c.Mb(o.a),c.Mb(r.a),c.Mb(c.h),c.Mb(b.e))},t.\u0275cmp=c.Gb({type:t,selectors:[["app-campaign-add"]],decls:45,vars:16,consts:[[1,"row"],[1,"col-sm-12"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[3,"cardTitle","options"],[1,"col-md-6"],[1,"form-group"],["type","text","placeholder","name",1,"form-control",3,"formControl"],[1,"control-label","text-md-right"],[1,"date-picker"],[3,"setDate","formControl","config"],[1,"date-picker-icon"],[1,"fa","fa-calendar"],[1,"form-group","form-check"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"formControl"],["for","exampleCheck1",1,"form-check-label"],["bindLabel","label","bindValue","value","placeholder","Select type",3,"formControl","items"],["for","exampleFormControlTextarea1"],["type","text","placeholder","objective",1,"form-control",3,"formControl"],[1,"text-right","border-top","py-4","mt-2","card-footer"],["type","button","routerLink","/campaign",1,"btn","btn-light"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"form",2),c.cc("ngSubmit",function(){return e.submitForm(e.addForm)}),c.Sb(3,"app-card",3),c.Sb(4,"div",0),c.Sb(5,"div",4),c.Sb(6,"div",5),c.Sb(7,"label"),c.Gc(8,"Name "),c.Sb(9,"em"),c.Gc(10,"*"),c.Rb(),c.Rb(),c.Nb(11,"input",6),c.Rb(),c.Sb(12,"div",5),c.Sb(13,"label",7),c.Gc(14,"Valid Until "),c.Rb(),c.Sb(15,"div",8),c.Nb(16,"ng2-flatpickr",9),c.Sb(17,"span",10),c.Nb(18,"span",11),c.Rb(),c.Rb(),c.Rb(),c.Sb(19,"div",12),c.Nb(20,"input",13),c.Sb(21,"label",14),c.Gc(22,"Is Active"),c.Rb(),c.Rb(),c.Rb(),c.Sb(23,"div",4),c.Sb(24,"div",5),c.Sb(25,"label",7),c.Gc(26,"Valid From "),c.Rb(),c.Sb(27,"div",8),c.Nb(28,"ng2-flatpickr",9),c.Sb(29,"span",10),c.Nb(30,"span",11),c.Rb(),c.Rb(),c.Rb(),c.Sb(31,"div",5),c.Sb(32,"label"),c.Gc(33,"Type"),c.Rb(),c.Nb(34,"ng-select",15),c.Rb(),c.Sb(35,"div",5),c.Sb(36,"label",16),c.Gc(37,"Objective"),c.Rb(),c.Nb(38,"input",17),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(39,"div",18),c.Sb(40,"button",19),c.Gc(41," Cancel "),c.Rb(),c.Sb(42,"button",20),c.Ec(43,v,1,0,"i",21),c.Gc(44," Submit "),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&t&&(c.yb(2),c.kc("formGroup",e.addForm),c.yb(1),c.kc("cardTitle",e.pageTitle)("options",!1),c.yb(8),c.kc("formControl",e.addForm.controls.name),c.yb(5),c.kc("setDate",e.valid_until)("formControl",e.addForm.controls.valid_until)("config",e.exampleOptions),c.yb(4),c.kc("formControl",e.addForm.controls.is_active),c.yb(8),c.kc("setDate",e.valid_from)("formControl",e.addForm.controls.valid_from)("config",e.exampleOptions),c.yb(6),c.kc("formControl",e.addForm.controls.type)("items",e.campingTypeArray),c.yb(4),c.kc("formControl",e.addForm.controls.objective),c.yb(4),c.kc("disabled",e.showLoader),c.yb(1),c.kc("ngIf",e.showLoader))},directives:[l.s,l.l,d.a,l.f,p.a,l.c,l.k,l.e,m.a,h.a,l.a,u.a,o.g,a.m],encapsulation:2}),t})();var g=i("ebz3"),y=i("jLqM");const S=[{path:"",component:f}];let R=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},providers:[r.a],imports:[[a.b,l.g,l.p,g.a,u.b,h.b,y.a,o.j.forChild(S)]]}),t})()}}]);