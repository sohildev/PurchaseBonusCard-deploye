!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{cphX:function(i,a,o){"use strict";o.r(a),o.d(a,"routes",function(){return w}),o.d(a,"CampaignAddModule",function(){return _});var n=o("ofXK"),r=o("tyNb"),c=o("l1aK"),l=o("Lw2Y"),b=o("3Pt+"),s=o("zzOR"),d=o("fXoL"),p=o("jhN1"),m=o("VT7O"),u=o("/n7v"),f=o("GgBf"),v=o("Jvtu"),h=o("ZOsW");function g(t,e){1&t&&d.Nb(0,"i",22)}var y,S,k=((y=function(){function i(e,a,o,n,r,c){t(this,i),this.router=e,this.fb=a,this.activatedRoute=o,this.campaignService=n,this.cdr=r,this.titleService=c,this.exampleOptions=s.a,this.campingTypeArray=[],this.loadingState=!1,this.showLoader=!1,this.valid_from=new Date,this.valid_until=new Date,this.formErrors={name:null,apierror:null},this.isEditing=!1,this.editId=null,this.pageTitle="Create Campaign",this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id")),this.addForm=this.fb.group({name:[null,b.q.compose([b.q.required])],type:[null],objective:[""],valid_from:[null],valid_until:[null],is_active:[!1]})}var a,o,n;return a=i,(o=[{key:"ngOnInit",value:function(){this.getMasterData(),this.titleService.setTitle(this.pageTitle+" | bonus777 "),this.isEditing&&(this.getEditObject(),this.pageTitle="Update Campaign",this.titleService.setTitle(this.pageTitle+" | bonus777 "))}},{key:"ngAfterViewChecked",value:function(){this.cdr.detectChanges()}},{key:"getMasterData",value:function(){this.campingTypeArray=l.b.CAMPAIGN_TYPES}},{key:"getEditObject",value:function(){var t=this;this.campaignService.getCampaignById(this.editId).subscribe(function(e){e?(t.valid_from=e.valid_from,t.valid_until=e.valid_until,t.addForm.patchValue({name:e.name,type:e.type,objective:e.objective,is_active:e.is_active})):t.router.navigateByUrl("/campaign")})}},{key:"submitForm",value:function(t){var e=this;if(t.valid){this.showLoader=!0;var i=new FormData;i.append("name",t.value.name),i.append("objective",t.value.objective),t.value.type&&i.append("type",t.value.type),i.append("valid_from",l.a.changedateFormate(t.value.valid_from[0])),i.append("valid_until",l.a.changedateFormate(t.value.valid_until[0])),i.append("is_active",!!t.value.is_active&&t.value.is_active),this.isEditing?this.campaignService.editCampaign(this.editId,i).subscribe(function(t){e.showLoader=!1,t&&e.router.navigateByUrl("/campaign")},function(t){e.showLoader=!1}):this.campaignService.addCampaign(i).subscribe(function(t){e.showLoader=!1,t&&e.router.navigateByUrl("/campaign")},function(t){e.showLoader=!1})}}}])&&e(a.prototype,o),n&&e(a,n),i}()).\u0275fac=function(t){return new(t||y)(d.Mb(r.f),d.Mb(b.d),d.Mb(r.a),d.Mb(c.a),d.Mb(d.h),d.Mb(p.e))},y.\u0275cmp=d.Gb({type:y,selectors:[["app-campaign-add"]],decls:45,vars:16,consts:[[1,"row"],[1,"col-sm-12"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[3,"cardTitle","options"],[1,"col-md-6"],[1,"form-group"],["type","text","placeholder","name",1,"form-control",3,"formControl"],[1,"control-label","text-md-right"],[1,"date-picker"],[3,"setDate","formControl","config"],[1,"date-picker-icon"],[1,"fa","fa-calendar"],[1,"form-group","form-check"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"formControl"],["for","exampleCheck1",1,"form-check-label"],["bindLabel","label","bindValue","value","placeholder","Select type",3,"formControl","items"],["for","exampleFormControlTextarea1"],["type","text","placeholder","objective",1,"form-control",3,"formControl"],[1,"text-right","border-top","py-4","mt-2","card-footer"],["type","button","routerLink","/campaign",1,"btn","btn-light"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"form",2),d.cc("ngSubmit",function(){return e.submitForm(e.addForm)}),d.Sb(3,"app-card",3),d.Sb(4,"div",0),d.Sb(5,"div",4),d.Sb(6,"div",5),d.Sb(7,"label"),d.Gc(8,"Name "),d.Sb(9,"em"),d.Gc(10,"*"),d.Rb(),d.Rb(),d.Nb(11,"input",6),d.Rb(),d.Sb(12,"div",5),d.Sb(13,"label",7),d.Gc(14,"Valid Until "),d.Rb(),d.Sb(15,"div",8),d.Nb(16,"ng2-flatpickr",9),d.Sb(17,"span",10),d.Nb(18,"span",11),d.Rb(),d.Rb(),d.Rb(),d.Sb(19,"div",12),d.Nb(20,"input",13),d.Sb(21,"label",14),d.Gc(22,"Is Active"),d.Rb(),d.Rb(),d.Rb(),d.Sb(23,"div",4),d.Sb(24,"div",5),d.Sb(25,"label",7),d.Gc(26,"Valid From "),d.Rb(),d.Sb(27,"div",8),d.Nb(28,"ng2-flatpickr",9),d.Sb(29,"span",10),d.Nb(30,"span",11),d.Rb(),d.Rb(),d.Rb(),d.Sb(31,"div",5),d.Sb(32,"label"),d.Gc(33,"Type"),d.Rb(),d.Nb(34,"ng-select",15),d.Rb(),d.Sb(35,"div",5),d.Sb(36,"label",16),d.Gc(37,"Objective"),d.Rb(),d.Nb(38,"input",17),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(39,"div",18),d.Sb(40,"button",19),d.Gc(41," Cancel "),d.Rb(),d.Sb(42,"button",20),d.Ec(43,g,1,0,"i",21),d.Gc(44," Submit "),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.yb(2),d.kc("formGroup",e.addForm),d.yb(1),d.kc("cardTitle",e.pageTitle)("options",!1),d.yb(8),d.kc("formControl",e.addForm.controls.name),d.yb(5),d.kc("setDate",e.valid_until)("formControl",e.addForm.controls.valid_until)("config",e.exampleOptions),d.yb(4),d.kc("formControl",e.addForm.controls.is_active),d.yb(8),d.kc("setDate",e.valid_from)("formControl",e.addForm.controls.valid_from)("config",e.exampleOptions),d.yb(6),d.kc("formControl",e.addForm.controls.type)("items",e.campingTypeArray),d.yb(4),d.kc("formControl",e.addForm.controls.objective),d.yb(4),d.kc("disabled",e.showLoader),d.yb(1),d.kc("ngIf",e.showLoader))},directives:[b.s,b.l,m.a,b.f,u.a,b.c,b.k,b.e,f.a,v.a,b.a,h.a,r.g,n.m],encapsulation:2}),y),R=o("ebz3"),C=o("jLqM"),w=[{path:"",component:k}],_=((S=function e(){t(this,e)}).\u0275mod=d.Kb({type:S}),S.\u0275inj=d.Jb({factory:function(t){return new(t||S)},providers:[c.a],imports:[[n.b,b.g,b.p,R.a,h.b,v.b,C.a,r.j.forChild(w)]]}),S)}}])}();