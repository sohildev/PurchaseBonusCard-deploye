(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"0DkP":function(i,t,e){"use strict";e.r(t),e.d(t,"routes",function(){return k}),e.d(t,"LoginBonusAddModule",function(){return w});var o=e("ofXK"),a=e("tyNb"),n=e("l1aK"),r=e("3Pt+"),s=e("ebz3"),c=e("ZOsW"),l=e("Jvtu"),d=e("Lw2Y"),b=e("zzOR"),p=e("fXoL"),u=e("9Iw4"),m=e("jhN1"),h=e("VT7O"),g=e("/n7v"),v=e("GgBf"),f=e("hR8x");function S(i,t){1&i&&p.Nb(0,"i",20)}let R=(()=>{class i{constructor(i,t,e,o,a,n,s){this.router=i,this.fb=t,this.activatedRoute=e,this.loginBonusService=o,this.campaignService=a,this.cdr=n,this.titleService=s,this.exampleOptions=b.a,this.campingListArray=[],this.loadingState=!1,this.showLoader=!1,this.valid_from=new Date,this.valid_until=new Date,this.formErrors={code:null,apierror:null},this.isEditing=!1,this.editId=null,this.pageTitle="Create Login Bonus",this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id")),this.addForm=this.fb.group({code:[null,r.q.compose([r.q.required])],campaign:[null,r.q.compose([r.q.required])],objective:[""],valid_from:[null],valid_until:[null],is_active:[!1]})}ngOnInit(){this.getMasterData(),this.titleService.setTitle(this.pageTitle+" | bonus777 "),this.isEditing&&(this.getEditObject(),this.pageTitle="Update Login Bonus",this.titleService.setTitle(this.pageTitle+" | bonus777 "))}ngAfterViewChecked(){this.cdr.detectChanges()}getMasterData(){this.campaignService.getCampaignList({}).subscribe(i=>{i&&(this.campingListArray=i)})}getEditObject(){this.loginBonusService.getLoginBonusById(this.editId).subscribe(i=>{i?(this.valid_from=i.valid_from,this.valid_until=i.valid_until,this.addForm.patchValue({code:i.code,campaign:i.campaign,is_active:i.is_active})):this.router.navigateByUrl("/login-bonus")})}submitForm(i){if(i.valid){this.showLoader=!0;const t=new FormData;t.append("code",i.value.code),t.append("campaign",i.value.campaign),t.append("valid_from",d.a.changedateFormate(i.value.valid_from[0])),t.append("valid_until",d.a.changedateFormate(i.value.valid_until[0])),t.append("is_active",!!i.value.is_active&&i.value.is_active),this.isEditing?this.loginBonusService.editLoginBonus(this.editId,t).subscribe(i=>{this.showLoader=!1,i&&this.router.navigateByUrl("/login-bonus")},i=>{this.showLoader=!1}):this.loginBonusService.addLoginBonus(t).subscribe(i=>{this.showLoader=!1,i&&this.router.navigateByUrl("/login-bonus")},i=>{this.showLoader=!1})}}}return i.\u0275fac=function(t){return new(t||i)(p.Mb(a.f),p.Mb(r.d),p.Mb(a.a),p.Mb(u.a),p.Mb(n.a),p.Mb(p.h),p.Mb(m.e))},i.\u0275cmp=p.Gb({type:i,selectors:[["app-login-bonus-add"]],decls:43,vars:15,consts:[[1,"row"],[1,"col-sm-12"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[3,"cardTitle","options"],[1,"col-md-6"],[1,"form-group"],["type","text","placeholder","code",1,"form-control",3,"formControl"],[1,"control-label","text-md-right"],[1,"date-picker"],[3,"setDate","formControl","config"],[1,"date-picker-icon"],[1,"fa","fa-calendar"],[1,"form-group","form-check"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"formControl"],["for","exampleCheck1",1,"form-check-label"],["number","","bindLabel","name","bindValue","id","placeholder","Select campaign",3,"formControl","items"],[1,"text-right","border-top","py-4","mt-2","card-footer"],["type","button","routerLink","/login-bonus",1,"btn","btn-light"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"]],template:function(i,t){1&i&&(p.Sb(0,"div",0),p.Sb(1,"div",1),p.Sb(2,"form",2),p.cc("ngSubmit",function(){return t.submitForm(t.addForm)}),p.Sb(3,"app-card",3),p.Sb(4,"div",0),p.Sb(5,"div",4),p.Sb(6,"div",5),p.Sb(7,"label"),p.Gc(8,"Code "),p.Sb(9,"em"),p.Gc(10,"*"),p.Rb(),p.Rb(),p.Nb(11,"input",6),p.Rb(),p.Sb(12,"div",5),p.Sb(13,"label",7),p.Gc(14,"Valid Until "),p.Rb(),p.Sb(15,"div",8),p.Nb(16,"ng2-flatpickr",9),p.Sb(17,"span",10),p.Nb(18,"span",11),p.Rb(),p.Rb(),p.Rb(),p.Sb(19,"div",12),p.Nb(20,"input",13),p.Sb(21,"label",14),p.Gc(22,"Is Active"),p.Rb(),p.Rb(),p.Rb(),p.Sb(23,"div",4),p.Sb(24,"div",5),p.Sb(25,"label",7),p.Gc(26,"Valid From "),p.Rb(),p.Sb(27,"div",8),p.Nb(28,"ng2-flatpickr",9),p.Sb(29,"span",10),p.Nb(30,"span",11),p.Rb(),p.Rb(),p.Rb(),p.Sb(31,"div",5),p.Sb(32,"label"),p.Gc(33,"Campaign "),p.Sb(34,"em"),p.Gc(35,"*"),p.Rb(),p.Rb(),p.Nb(36,"ng-select",15),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Sb(37,"div",16),p.Sb(38,"button",17),p.Gc(39," Cancel "),p.Rb(),p.Sb(40,"button",18),p.Ec(41,S,1,0,"i",19),p.Gc(42," Submit "),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Rb()),2&i&&(p.yb(2),p.kc("formGroup",t.addForm),p.yb(1),p.kc("cardTitle",t.pageTitle)("options",!1),p.yb(8),p.kc("formControl",t.addForm.controls.code),p.yb(5),p.kc("setDate",t.valid_until)("formControl",t.addForm.controls.valid_until)("config",t.exampleOptions),p.yb(4),p.kc("formControl",t.addForm.controls.is_active),p.yb(8),p.kc("setDate",t.valid_from)("formControl",t.addForm.controls.valid_from)("config",t.exampleOptions),p.yb(8),p.kc("formControl",t.addForm.controls.campaign)("items",t.campingListArray),p.yb(4),p.kc("disabled",t.showLoader),p.yb(1),p.kc("ngIf",t.showLoader))},directives:[r.s,r.l,h.a,r.f,g.a,r.c,r.k,r.e,v.a,l.a,r.a,c.a,f.b,a.g,o.m],encapsulation:2}),i})();var y=e("jLqM");const k=[{path:"",component:R}];let w=(()=>{class i{}return i.\u0275mod=p.Kb({type:i}),i.\u0275inj=p.Jb({factory:function(t){return new(t||i)},providers:[n.a,u.a],imports:[[o.b,r.g,r.p,s.a,c.b,l.b,y.a,a.j.forChild(k)]]}),i})()}}]);