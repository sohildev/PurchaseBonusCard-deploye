(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"0aJ0":function(e,o,r){"use strict";r.r(o),r.d(o,"routes",function(){return C}),r.d(o,"PurchaseBonusAddModule",function(){return k});var t=r("ofXK"),a=r("Jvtu"),i=r("ZOsW"),n=r("tyNb"),s=r("3Pt+"),b=r("ebz3"),l=r("l1aK"),c=r("Lw2Y"),m=r("zzOR"),u=r("fXoL"),d=r("Qtta"),p=r("gW3T"),_=r("jhN1"),g=r("VT7O"),h=r("/n7v"),f=r("GgBf"),v=r("hR8x");function S(e,o){1&e&&u.Nb(0,"i",33)}let y=(()=>{class e{constructor(e,o,r,t,a,i,n,b){this.router=e,this.fb=o,this.activatedRoute=r,this.purchaseBonusService=t,this.campaignService=a,this.bonusBoosterService=i,this.cdr=n,this.titleService=b,this.exampleOptions=m.a,this.campingListArray=[],this.bonusBoosterListArray=[],this.userSegmentationType=[],this.purchaseBonusTabType=[],this.loadingState=!1,this.showLoader=!1,this.valid_from=new Date,this.valid_until=new Date,this.formErrors={code:null,apierror:null},this.isEditing=!1,this.editId=null,this.pageTitle="Create Purchase Bonus",this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id")),this.addForm=this.fb.group({code:[null,s.q.compose([s.q.required])],bonus_booster:[null,s.q.compose([s.q.required])],campaign:[null,s.q.compose([s.q.required])],bonus_image_front:[null,s.q.compose([s.q.required,s.q.pattern(c.c)])],bonus_image_back:[null,s.q.compose([s.q.required,s.q.pattern(c.c)])],user_redeem_limit:[null,s.q.compose([s.q.required])],user_limit:[null,s.q.compose([s.q.required])],tab_type:[null,s.q.compose([s.q.required])],ribbon_msg:[null],user_segmentation_type:[null,s.q.compose([s.q.required])],wager_bonus_expiry:[null,s.q.compose([s.q.required])],wager_to_release_ratio_numerator:[null,s.q.compose([s.q.required])],wager_to_release_ratio_denominator:[null,s.q.compose([s.q.required])],valid_from:[null],valid_until:[null],is_active:[!1],is_bonus_booster_enabled:[!1]})}ngOnInit(){this.getMasterData(),this.titleService.setTitle(this.pageTitle+" | bonus777 "),this.isEditing&&(this.getEditObject(),this.pageTitle="Update Purchase Bonus",this.titleService.setTitle(this.pageTitle+" | bonus777 "))}ngAfterViewChecked(){this.cdr.detectChanges()}getMasterData(){this.userSegmentationType=c.b.USER_SEGMENTATION_TYPE,this.purchaseBonusTabType=c.b.PURCHASE_BONUS_TAB_TYPES,this.campaignService.getCampaignList({}).subscribe(e=>{e&&(this.campingListArray=e)}),this.bonusBoosterService.getBonusBoosterList({}).subscribe(e=>{e&&(this.bonusBoosterListArray=e)})}getEditObject(){this.purchaseBonusService.getPurchaseBonusById(this.editId).subscribe(e=>{e?(this.valid_from=e.valid_from,this.valid_until=e.valid_until,this.addForm.patchValue({code:e.code,bonus_image_front:e.bonus_image_front,bonus_image_back:e.bonus_image_back,user_redeem_limit:e.user_redeem_limit,user_limit:e.user_limit,tab_type:e.tab_type,ribbon_msg:e.ribbon_msg,wager_bonus_expiry:e.wager_bonus_expiry,wager_to_release_ratio_numerator:e.wager_to_release_ratio_numerator,wager_to_release_ratio_denominator:e.wager_to_release_ratio_denominator,user_segmentation_type:e.user_segmentation_type,is_bonus_booster_enabled:e.is_bonus_booster_enabled,bonus_booster:e.bonus_booster,campaign:e.campaign,is_active:e.is_active})):this.router.navigateByUrl("/purchase-bonus")})}submitForm(e){if(e.valid){this.showLoader=!0;const o=new FormData;o.append("code",e.value.code),o.append("campaign",e.value.campaign),o.append("bonus_booster",e.value.bonus_booster),o.append("user_segmentation_type",e.value.user_segmentation_type),o.append("valid_from",c.a.changedateFormate(e.value.valid_from[0])),o.append("valid_until",c.a.changedateFormate(e.value.valid_until[0])),o.append("is_active",!!e.value.is_active&&e.value.is_active),o.append("is_bonus_booster_enabled",!!e.value.is_bonus_booster_enabled&&e.value.is_bonus_booster_enabled),o.append("bonus_image_front",e.value.bonus_image_front),o.append("bonus_image_back",e.value.bonus_image_back),o.append("user_redeem_limit",e.value.user_redeem_limit),o.append("user_limit",e.value.user_limit),o.append("tab_type",e.value.tab_type),o.append("ribbon_msg",e.value.ribbon_msg),o.append("wager_bonus_expiry",e.value.wager_bonus_expiry),o.append("wager_to_release_ratio_numerator",e.value.wager_to_release_ratio_numerator),o.append("wager_to_release_ratio_denominator",e.value.wager_to_release_ratio_denominator),this.isEditing?this.purchaseBonusService.editPurchaseBonus(this.editId,o).subscribe(e=>{this.showLoader=!1,e&&this.router.navigateByUrl("/purchase-bonus")},e=>{this.showLoader=!1}):this.purchaseBonusService.addPurchaseBonus(o).subscribe(e=>{this.showLoader=!1,e&&this.router.navigateByUrl("/purchase-bonus")},e=>{this.showLoader=!1})}}}return e.\u0275fac=function(o){return new(o||e)(u.Mb(n.f),u.Mb(s.d),u.Mb(n.a),u.Mb(d.a),u.Mb(l.a),u.Mb(p.a),u.Mb(u.h),u.Mb(_.e))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-purchase-bonus-add"]],decls:111,vars:30,consts:[[1,"row"],[1,"col-sm-12"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[3,"cardTitle","options"],[1,"col-md-6"],[1,"form-group"],["type","text","placeholder","code",1,"form-control",3,"formControl"],["number","","bindLabel","label","bindValue","value","placeholder","Select tab type",3,"formControl","items"],[1,"control-label","text-md-right"],[1,"date-picker"],[3,"setDate","formControl","config"],[1,"date-picker-icon"],[1,"fa","fa-calendar"],["number","","bindLabel","label","bindValue","value","placeholder","Select user segmentation type",3,"formControl","items"],["for","exampleFormControlTextarea1"],["type","text","placeholder","bonus_image_front",1,"form-control",3,"formControl"],["type","url","placeholder","bonus image back",1,"form-control",3,"formControl"],["number","","type","url","placeholder","user redeem limit",1,"form-control",3,"formControl"],[1,"form-group","form-check"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"formControl"],["for","exampleCheck1",1,"form-check-label"],["number","","bindLabel","name","bindValue","id","placeholder","Select campaign",3,"formControl","items"],["number","","bindLabel","code","bindValue","id","placeholder","Select bonus booster",3,"formControl","items"],["number","","type","text","placeholder","user limit",1,"form-control",3,"formControl"],["number","","type","text","placeholder","wager bonus expiry",1,"form-control",3,"formControl"],["number","","type","text","placeholder","wager to release ratio numerator",1,"form-control",3,"formControl"],["number","","type","text","placeholder","wager to release ratio denominator",1,"form-control",3,"formControl"],["for","exampleFormControlRibbonmsg1"],["placeholder","ribbon massage...","id","exampleFormControlRibbonmsg1","rows","3",1,"form-control",3,"formControl"],[1,"text-right","border-top","py-4","mt-2","card-footer"],["type","button","routerLink","/purchase-bonus",1,"btn","btn-light"],["type","submit",1,"btn","btn-primary","ml-2",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,o){1&e&&(u.Sb(0,"div",0),u.Sb(1,"div",1),u.Sb(2,"form",2),u.cc("ngSubmit",function(){return o.submitForm(o.addForm)}),u.Sb(3,"app-card",3),u.Sb(4,"div",0),u.Sb(5,"div",4),u.Sb(6,"div",5),u.Sb(7,"label"),u.Gc(8,"Code "),u.Sb(9,"em"),u.Gc(10,"*"),u.Rb(),u.Rb(),u.Nb(11,"input",6),u.Rb(),u.Sb(12,"div",5),u.Sb(13,"label"),u.Gc(14,"Tab Type "),u.Sb(15,"em"),u.Gc(16,"*"),u.Rb(),u.Rb(),u.Nb(17,"ng-select",7),u.Rb(),u.Sb(18,"div",5),u.Sb(19,"label",8),u.Gc(20,"Valid Until "),u.Rb(),u.Sb(21,"div",9),u.Nb(22,"ng2-flatpickr",10),u.Sb(23,"span",11),u.Nb(24,"span",12),u.Rb(),u.Rb(),u.Rb(),u.Sb(25,"div",5),u.Sb(26,"label"),u.Gc(27,"User Segmentation Type "),u.Sb(28,"em"),u.Gc(29,"*"),u.Rb(),u.Rb(),u.Nb(30,"ng-select",13),u.Rb(),u.Sb(31,"div",5),u.Sb(32,"label",14),u.Gc(33,"Bonus image front "),u.Sb(34,"em"),u.Gc(35,"*"),u.Rb(),u.Rb(),u.Nb(36,"input",15),u.Rb(),u.Sb(37,"div",5),u.Sb(38,"label",14),u.Gc(39,"Bonus image back "),u.Sb(40,"em"),u.Gc(41,"*"),u.Rb(),u.Rb(),u.Nb(42,"input",16),u.Rb(),u.Sb(43,"div",5),u.Sb(44,"label",14),u.Gc(45,"User redeem limit "),u.Sb(46,"em"),u.Gc(47,"*"),u.Rb(),u.Rb(),u.Nb(48,"input",17),u.Rb(),u.Sb(49,"div",18),u.Nb(50,"input",19),u.Sb(51,"label",20),u.Gc(52,"Is Active"),u.Rb(),u.Rb(),u.Sb(53,"div",18),u.Nb(54,"input",19),u.Sb(55,"label",20),u.Gc(56,"Is bonus booster enabled"),u.Rb(),u.Rb(),u.Rb(),u.Sb(57,"div",4),u.Sb(58,"div",5),u.Sb(59,"label"),u.Gc(60,"Campaign "),u.Sb(61,"em"),u.Gc(62,"*"),u.Rb(),u.Rb(),u.Nb(63,"ng-select",21),u.Rb(),u.Sb(64,"div",5),u.Sb(65,"label"),u.Gc(66,"Bonus Booster "),u.Sb(67,"em"),u.Gc(68,"*"),u.Rb(),u.Rb(),u.Nb(69,"ng-select",22),u.Rb(),u.Sb(70,"div",5),u.Sb(71,"label",8),u.Gc(72,"Valid From "),u.Rb(),u.Sb(73,"div",9),u.Nb(74,"ng2-flatpickr",10),u.Sb(75,"span",11),u.Nb(76,"span",12),u.Rb(),u.Rb(),u.Rb(),u.Sb(77,"div",5),u.Sb(78,"label",14),u.Gc(79,"User limit "),u.Sb(80,"em"),u.Gc(81,"*"),u.Rb(),u.Rb(),u.Nb(82,"input",23),u.Rb(),u.Sb(83,"div",5),u.Sb(84,"label",14),u.Gc(85,"Wager Bonus Expiry "),u.Sb(86,"em"),u.Gc(87,"*"),u.Rb(),u.Rb(),u.Nb(88,"input",24),u.Rb(),u.Sb(89,"div",5),u.Sb(90,"label",14),u.Gc(91,"Wager To Release Ratio Numerator "),u.Sb(92,"em"),u.Gc(93,"*"),u.Rb(),u.Rb(),u.Nb(94,"input",25),u.Rb(),u.Sb(95,"div",5),u.Sb(96,"label",14),u.Gc(97,"Wager To Release Ratio Denominator "),u.Sb(98,"em"),u.Gc(99,"*"),u.Rb(),u.Rb(),u.Nb(100,"input",26),u.Rb(),u.Sb(101,"div",5),u.Sb(102,"label",27),u.Gc(103,"Ribbon massage "),u.Rb(),u.Nb(104,"textarea",28),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Sb(105,"div",29),u.Sb(106,"button",30),u.Gc(107," Cancel "),u.Rb(),u.Sb(108,"button",31),u.Ec(109,S,1,0,"i",32),u.Gc(110," Submit "),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()),2&e&&(u.yb(2),u.kc("formGroup",o.addForm),u.yb(1),u.kc("cardTitle",o.pageTitle)("options",!1),u.yb(8),u.kc("formControl",o.addForm.controls.code),u.yb(6),u.kc("formControl",o.addForm.controls.tab_type)("items",o.purchaseBonusTabType),u.yb(5),u.kc("setDate",o.valid_until)("formControl",o.addForm.controls.valid_until)("config",o.exampleOptions),u.yb(8),u.kc("formControl",o.addForm.controls.user_segmentation_type)("items",o.userSegmentationType),u.yb(6),u.kc("formControl",o.addForm.controls.bonus_image_front),u.yb(6),u.kc("formControl",o.addForm.controls.bonus_image_back),u.yb(6),u.kc("formControl",o.addForm.controls.user_redeem_limit),u.yb(2),u.kc("formControl",o.addForm.controls.is_active),u.yb(4),u.kc("formControl",o.addForm.controls.is_bonus_booster_enabled),u.yb(9),u.kc("formControl",o.addForm.controls.campaign)("items",o.campingListArray),u.yb(6),u.kc("formControl",o.addForm.controls.bonus_booster)("items",o.bonusBoosterListArray),u.yb(5),u.kc("setDate",o.valid_from)("formControl",o.addForm.controls.valid_from)("config",o.exampleOptions),u.yb(8),u.kc("formControl",o.addForm.controls.user_limit),u.yb(6),u.kc("formControl",o.addForm.controls.wager_bonus_expiry),u.yb(6),u.kc("formControl",o.addForm.controls.wager_to_release_ratio_numerator),u.yb(6),u.kc("formControl",o.addForm.controls.wager_to_release_ratio_denominator),u.yb(4),u.kc("formControl",o.addForm.controls.ribbon_msg),u.yb(4),u.kc("disabled",o.showLoader),u.yb(1),u.kc("ngIf",o.showLoader))},directives:[s.s,s.l,g.a,s.f,h.a,s.c,s.k,s.e,f.a,i.a,v.b,a.a,s.a,n.g,t.m],encapsulation:2}),e})();var R=r("jLqM");const C=[{path:"",component:y}];let k=(()=>{class e{}return e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({factory:function(o){return new(o||e)},providers:[l.a,p.a,d.a],imports:[[t.b,s.g,s.p,b.a,i.b,a.b,R.a,n.j.forChild(C)]]}),e})()}}]);